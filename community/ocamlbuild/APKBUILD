# Contributor: Jon Ong <jonongjs@rottenmage.com>
# Maintainer: Anil Madhavapeddy <anil@recoil.org>
pkgname=ocamlbuild
pkgver=0.9.3
pkgrel=1
pkgdesc="Generic build tool with built-in rules for building OCaml library and programs."
url="https://github.com/ocaml/ocamlbuild"
arch="all !x86 !armhf !s390x" #ocaml not avail on excluded platforms
license="LGPL-2.0"
makedepends="ocaml"
source="$pkgname-$pkgver.tar.gz::https://github.com/ocaml/$pkgname/archive/$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"

	make configure OCAML_NATIVE=true \
		OCAMLBUILD_BINDIR="/usr/bin" \
		OCAMLBUILD_LIBDIR="/usr/lib/ocaml"
	make
}

package() {
	cd "$builddir"

	make DESTDIR="$pkgdir" install
}

sha512sums="49ab3a13d48f8f554c85ebc8ce9cbc5a5e63112c2d50215a6f4be78cc21c6e93bd5d657ea45584cfbfa00d182d99adad0fbb706e8121b71ea3ecf4830fd947dd  ocamlbuild-0.9.3.tar.gz"
