# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libxfont
pkgver=1.5.2
pkgrel=1
pkgdesc="X11 font rasterisation library"
url="http://xorg.freedesktop.org/"
arch="all"
license="custom"
subpackages="$pkgname-dev"
depends=""
depends_dev="xproto fontsproto libfontenc-dev freetype-dev"
makedepends="$depends_dev xtrans zlib-dev"
source="http://xorg.freedesktop.org/archive/individual/lib/libXfont-$pkgver.tar.bz2
	CVE-2017-16611.patch"
builddir="$srcdir/libXfont-$pkgver"

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		|| return 1
	make || return 1
}

package() {
	make DESTDIR="$pkgdir" \
		-C "$builddir" install || return 1
}
sha512sums="6f2005eb07afe6ea39b0be035cebdf3492b60758b7b9bed9e226280e370c15883ce6e2f72d1faa006968a0d9b3b649d3b80fcdaa3f7e01a71abcae88d99c7a41  libXfont-1.5.2.tar.bz2
cab490d1e6b36fac4531175c911f5d17735c48753b906f63034a66b88b193404b79ad72158efc01cf6cd215cf457a4e342815cbb0e7228ee1e6f1a8fa34b5853  CVE-2017-16611.patch"
