From 549b5fa1384bb29c3ea92486539dccd9a7d71b83 Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Tue, 28 Nov 2017 13:23:17 +0100
Subject: [PATCH] fsck: resolve LABEL=.../UUID=... spec to device

---
 e2fsprogs/fsck.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/e2fsprogs/fsck.c b/e2fsprogs/fsck.c
index eb53002b1..2adf0cf07 100644
--- a/e2fsprogs/fsck.c
+++ b/e2fsprogs/fsck.c
@@ -60,6 +60,7 @@
 //usage:     "\n	-t TYPE	List of filesystem types to check"
 
 #include "libbb.h"
+#include "volume_id.h"
 #include "common_bufsiz.h"
 
 /* "progress indicator" code is somewhat buggy and ext[23] specific.
@@ -976,6 +977,7 @@ int fsck_main(int argc UNUSED_PARAM, char **argv)
 // "/path", "UUID=xxx" or "LABEL=xxx" into block device name
 // ("UUID=xxx"/"LABEL=xxx" can probably shifted to fsck.auto duties)
 			devices = xrealloc_vector(devices, 2, num_devices);
+			resolve_mount_spec(&arg);
 			devices[num_devices++] = arg;
 			continue;
 		}
-- 
2.15.0

