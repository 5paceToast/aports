# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=libucontext
pkgver=0.1.2
pkgrel=0
pkgdesc="ucontext function implementations"
url="http://github.com/kaniini/libucontext"
arch="all"
license="ISC"
depends=""
install=""
subpackages="$pkgname-dev"
source="https://distfiles.dereferenced.org/libucontext/libucontext-$pkgver.tar.xz"
builddir="$srcdir/libucontext-$pkgver"

case "$CTARGET_ARCH" in
armhf)		LIBUCONTEXT_ARCH="arm" ;;
ppc64le)	LIBUCONTEXT_ARCH="ppc64" ;;
*)		LIBUCONTEXT_ARCH="$CTARGET_ARCH" ;;
esac

build() {
	cd "$builddir"
	make ARCH="$LIBUCONTEXT_ARCH"
}

check() {
	cd "$builddir"
	make ARCH="$LIBUCONTEXT_ARCH" check
}

package() {
	cd "$builddir"
	make ARCH="$LIBUCONTEXT_ARCH" DESTDIR="$pkgdir" install
}

sha512sums="0c1d74341487d3128667abe9b6594f70c41b4e26bfff656c96eff5de55795f3f4186b3f46281503daf0ee3694a3c10966dd733a6779f49544759a5fe8e6fcdf5  libucontext-0.1.2.tar.xz"
