Index: src/shell.c
==================================================================
--- src/shell.c
+++ src/shell.c
@@ -3799,10 +3799,11 @@
         isIPK = 0;
       }
     }
   }
   sqlite3_finalize(pStmt);
+  if( azCol==0 ) return 0;
   azCol[0] = 0;
   azCol[nCol+1] = 0;
 
   /* The decision of whether or not a rowid really needs to be preserved
   ** is tricky.  We never need to preserve a rowid for a WITHOUT ROWID table

