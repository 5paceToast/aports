# Maintainer: Marian Buschsieweke <marian.buschsieweke@ovgu.de>
pkgname=gajim-plugin-omemo
_pkgname="${pkgname#gajim-plugin-}"
pkgver=2.5.14
pkgrel=0
pkgdesc="Gajim plugin for Multi-End Message and Object Encryption (OMEMO)"
url="https://dev.gajim.org/gajim/gajim-plugins/wikis/OmemoGajimPlugin"
arch="noarch"
license="GPL-3.0-only"
depends="gajim py3-qrcode py3-axolotl"
makedepends="py-setuptools python3-dev"
source="$pkgname-$pkgver.zip::https://ftp.gajim.org/plugins_releases/${_pkgname}_${pkgver}.zip"
builddir="$srcdir"/$_pkgname
options="!check"

build() {
	return 0
}

package() {
	cd "$builddir"
	rm -f CHANGELOG COPYING
	site_pkgs="$(python3 -c 'import site; print(site.getsitepackages()[0])')"
	mkdir -p "$pkgdir/$site_pkgs/gajim/data/plugins/$_pkgname"
	cp -r ./* "$pkgdir/$site_pkgs/gajim/data/plugins/$_pkgname/"
}

sha512sums="5f084472b312cdf6f9166fa7e5852ef1e547c461899a5ad7dc71601f5807bcf0e45054e7db459a60cabf0c4504e2740b605fe2b3fdd8668fa6102bd77467f56c  gajim-plugin-omemo-2.5.14.zip"
