# Contributor: Taner Tas <taner76@gmail.com>
# Maintainer: Taner Tas <taner76@gmail.com>
pkgname=npapi-vlc
pkgver=0_git20180419
pkgrel=0
pkgdesc="NPAPI browser plugin based on libvlc"
url="https://code.videolan.org/videolan/npapi-vlc"
arch="all"
license="GPL-2.0-or-later"
makedepends="vlc-dev automake autoconf libtool npapi-sdk libx11-dev libxcb-dev
	gtk+2.0-dev"
source="${pkgname}-${pkgver}.tar.gz::https://code.videolan.org/videolan/${pkgname}/repository/master/archive.tar.gz
	libvlcpp-${pkgver}.tar.gz::https://code.videolan.org/videolan/libvlcpp/repository/master/archive.tar.gz
	"
options="!check"

builddir="$srcdir/${pkgname}-master"

prepare() {
	cd "$srcdir"
	mv npapi-vlc-master-* npapi-vlc-master
	mv libvlcpp-master-* libvlcpp-master
	cd "$builddir"
	rm -rf vlcpp
	cp -rf "$srcdir"/libvlcpp-master/vlcpp .
	./autogen.sh
}

build() {
	cd "$builddir"
	./configure --prefix=/usr
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="9409513f6d5bf4d50e37dc8491dad4615f1e345218db5484d4212d51d780e98360aed3de6afc3f57e3c773576fe45ad4b47e8a6f6e6cd22474e4264d193ae0ac  npapi-vlc-0_git20180419.tar.gz
d29158003e72055d5cae0696aea7f134d5ea4806ec96e2e8e717fa2608fa6fa2658ecdb1c983c72b7ab6f5b9d5424645d0dcbed1e7a1a6d5fa0175c5c5ad215e  libvlcpp-0_git20180419.tar.gz"
